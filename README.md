# Employee Catalog API

API для управления каталогом сотрудников с иерархической структурой.

## Установка

1. Создайте виртуальное окружение:
```bash
python -m venv venv
source venv/bin/activate  # Linux/MacOS
venv\Scripts\activate    # Windows
Установите зависимости:

bash
pip install -r requirements.txt
Убедитесь, что PostgreSQL запущен и создана БД "ILINE"

Запуск
Генерация тестовых данных (50k сотрудников):

bash
python generate_data.py
Запуск API сервера:

bash
python app.py
Использование
API будет доступно по адресу: http://localhost:8000

Документация Swagger: /docs
Документация ReDoc: /redoc

Конечные точки
GET /employees - список сотрудников (первые 100)
GET /employee/{id} - информация о сотруднике
POST /employee - создание сотрудника
DELETE /employee/{id} - удаление сотрудника

Структура данных
Иерархия сотрудников имеет ровно 5 уровней:

CEO (1 сотрудник)

Менеджеры (9 сотрудников)

Старшие специалисты (90 сотрудников)

Специалисты (900 сотрудников)

Ассистенты (49000 сотрудников)

text

### Как использовать проект:

1. Создайте и активируйте виртуальное окружение
2. Установите зависимости: `pip install -r requirements.txt`
3. Настройте PostgreSQL:
   - Создайте БД: `CREATE DATABASE ILINE;`
   - Убедитесь, что пользователь `postgres` имеет доступ
4. Запустите генерацию данных: `python generate_data.py`
5. Запустите сервер: `python api.py`
6. Откройте в браузере: `http://localhost:8000/docs`

### Особенности реализации:

1. **Строгая иерархия из 5 уровней**:
   - Уровень 1: 1 CEO
   - Уровень 2: 9 менеджеров
   - Уровень 3: 90 сотрудников (по 10 на менеджера)
   - Уровень 4: 900 сотрудников (по 10 на менеджера)
   - Уровень 5: 49000 сотрудников (случайное распределение)

2. **Эндпоинт иерархии**:
   - GET `/employees/hierarchy` возвращает древовидную структуру
   - Каждый узел содержит:
     - id сотрудника
     - ФИО
     - Должность
     - Список подчиненных (subordinates)

3. **Оптимизация производительности**:
   - Пакетная вставка данных (batch insert)
   - Рекурсивное построение дерева в памяти
   - Использование словаря для быстрого доступа к подчиненным

4. **Типизированные ответы**:
   - Модель `EmployeeHierarchy` с рекурсивным определением
   - Автоматическая валидация и документация через Pydantic